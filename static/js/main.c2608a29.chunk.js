(this["webpackJsonpcwn-onto-3d"]=this["webpackJsonpcwn-onto-3d"]||[]).push([[0],{20:function(e,n,t){e.exports=t(50)},25:function(e,n,t){},26:function(e,n,t){},27:function(e,n,t){},28:function(e,n,t){},50:function(e,n,t){"use strict";t.r(n);var o=t(0),a=t.n(o),c=t(14),s=t.n(c),l=(t(25),t(26),t(27),t(1));function r(){return{sentence:"",tokens:[],senseClouds:{},lemmaSenses:{},selSenseData:{}}}function i(e,n){var t=Object.assign({},e);switch(n.type){case"NEW_SENTENCE":t.sentence=n.payload;break;case"NEW_TAGGED":t.tokens=n.payload;break;case"NEW_LEMMA_SENSES":t.lemmaSenses=n.payload;break;case"NEW_SENSE_CLOUDS":t.senseClouds=n.payload;break;case"SELECT_SENSE":t.selSenseData=n.payload}return t}function u(){var e=Object(o.useReducer)(i,{},r),n=Object(l.a)(e,2),t=n[0],a=n[1];return{ontoState:t,controller:{updateSentence:function(e){e!==t.sentence&&(a({type:"NEW_SENTENCE",payload:e}),fetch("data/tag.json").then((function(e){return e.json()})).then((function(e){return e.data[0]})).then((function(e){return console.log("tagged"),console.log(e),a({type:"NEW_TAGGED",payload:e}),fetch("data/lemmas.json").then((function(e){return e.json()})).then((function(e){return e.data})).then((function(e){console.log("lemma senses"),console.log(e),a({type:"NEW_LEMMA_SENSES",payload:e})})),fetch("data/wsd.json").then((function(e){return e.json()})).then((function(e){return e.data[0]}))})).then((function(e){return console.log("wsd"),console.log(e),a({type:"NEW_TAGGED",payload:e}),fetch("data/sense_clouds.json").then((function(e){return e.json()})).then((function(e){return e.data}))})).then((function(e){console.log("sense clouds"),console.log(e),a({type:"NEW_SENSE_CLOUDS",payload:e})})))},selectSense:function(e){fetch("data/sense_data.json").then((function(e){return e.json()})).then((function(e){return e.data})).then((function(e){console.log("sense data"),console.log(e),a({type:"SELECT_SENSE",payload:e})}))}}}}t(28);function d(e){console.log("WsdView"),console.log(e);var n=e.tokens.map((function(e,n){return a.a.createElement("div",{key:"token-".concat(e[0],"-").concat(n),className:"token-wrapper"},a.a.createElement("div",{className:"pos"},e[1].endsWith("CATEGORY")?"":e[1]),a.a.createElement("div",{className:"word"},e[0]),a.a.createElement("div",{className:"badge badge-info sense-def"},e[3]))}));return a.a.createElement("div",{className:"d-flex flex-wrap"},n)}var f=t(18);function m(e){return Object(o.useEffect)((function(){console.log("sense 3d view");var n=function(e,n,t){var o={},a={},c={};e.map((function(e,n){var t=e[0],a="".concat(t,"-").concat(n);t in c?c[t].push(a):c[t]=[a],o[a]={id:a,type:"Lemma",label:t,fx:100*n,fy:0,fz:0}})),Object.entries(n).map((function(e,n){var t=Object(l.a)(e,2),s=t[0];t[1].map((function(e){o[e.id]={id:e.id,type:"CwnSense",label:"(".concat(e.pos,") ").concat(e.definition),fx:c[s].reduce((function(e,n){return e+=void 0!==o[n].fx?o[n].fx:0}),0)/c[s].length},c[s].map((function(n){var t="".concat(n,"-").concat(e.id);a[t]={source:n,target:e.id,label:"hasSense"}}))}))})),Object.entries(t).map((function(e,n){var t=Object(l.a)(e,2),c=t[0],s=t[1];s.relations.map((function(e){var n=Object(l.a)(e,5),t=(n[0],n[1]),s=n[2],r=n[3],i=n[4];t in o||(o[t]={id:t,type:"CwnSense",label:"[".concat(s,"] (").concat(r,") ").concat(i)});var u="".concat(c,"-").concat(t);a[u]={source:c,target:t,label:"CwnRelation"}}));var r=Object(l.a)(s.pwn,2),i=(r[0],r[1]);i in o||(o[i]={id:i,type:"PwnSynset",label:i,fy:-100});var u="".concat(c,"-").concat(i);a[u]={source:c,target:i,label:"PwnMapping"};var d=s.pwn_onto,f=function(e,n,t){void 0!==e&&e.reduce((function(e,n){n in o||(o[n]={id:n,type:"HyperHypo",label:n,fy:-200});var c="".concat(e,"-").concat(n);return a[c]={source:e,target:n,label:t},n}),n)},m=function(e,n,t){void 0!==e&&e.map((function(e){e in o||(o[e]={id:e,type:"HoloMero",label:e,fy:-200});var c="".concat(n,"-").concat(e);a[c]={source:n,target:e,label:t}}))};f(d.hypernyms,i,"hypernymy"),f(d.hyponyms,i,"hyponymy"),m(d.holonyms,i,"holonymy"),m(d.meronyms,i,"meronymy")}));var s={nodes:Object.values(o),links:Object.values(a)};return console.log(s),s}(e.tokens,e.lemmaSenses,e.senseClouds),t=document.getElementById("3d-graph");if(null!==t){var o=Object(f.a)()(t);o.forceEngine();o.graphData(n).nodeLabel("label").nodeAutoColorBy("type").nodeVal((function(e){return"Lemma"==e.type?20:3})).linkWidth(10).enableNodeDrag(!0)}}),[e.lemmaSenses,e.senseClouds]),a.a.createElement("div",{id:"3d-graph"})}function p(){var e=u(),n=e.ontoState,t=e.controller,c=Object(o.useRef)(null);return a.a.createElement("div",null,a.a.createElement("input",{ref:c,id:"inputText",type:"text",onKeyDown:function(e){"Enter"===e.key&&(console.log("enter"),t.updateSentence("<default>"))},placeholder:"\u8f38\u5165\u53e5\u5b50"}),a.a.createElement("div",{className:"cwn-onto-3d"},a.a.createElement(d,{tokens:n.tokens}),a.a.createElement(m,{tokens:n.tokens,lemmaSenses:n.lemmaSenses,senseClouds:n.senseClouds})))}var y=function(){return a.a.createElement("div",{className:"App"},a.a.createElement(p,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[20,1,2]]]);
//# sourceMappingURL=main.c2608a29.chunk.js.map